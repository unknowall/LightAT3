namespace LightCodec
{
    public interface ICodec
    {
        /// <summary>
        /// Initialize the codec.
        /// This method has to be called once before calling the decode() method.
        /// </summary>
        /// <param name="bytesPerFrame">  the number of bytes per input frame (block_align in ffmpeg) </param>
        /// <param name="channels">       the number of input channels </param>
        /// <param name="outputChannels"> the number of output channels </param>
        /// <param name="codingMode">     Atrac3 1=JOINT_STEREO / 0=STEREO </param>
        /// <returns>   0 success
        ///         < 0 error code </returns>
        int init(int bytesPerFrame, int channels, int outputChannels, int codingMode);

        /// <summary>
        /// Decode a frame.
        /// </summary>
        /// <param name="inputAddr">   the address of the input buffer </param>
        /// <param name="inputLength"> the maximum Length of the input buffer </param>
        /// <param name="outputAddr">  the address where to store the decode samples </param>
        /// <returns>            0  no frame decoded (end of input stream)
        ///                  < 0  error code
        ///                  > 0  number of bytes consumed from the input buffer </returns>
        unsafe int decode(void* inputAddr, int inputLength, void* output, out int outputLength);

        /// <returns>  the number of samples generated by one decode() call. </returns>
        int NumberOfSamples { get; }
    }

}